



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Configuration - SSP21-CPP</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#configuration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="SSP21-CPP" class="md-header-nav__button md-logo">
          
            <img src="../../img/ssp21.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              SSP21-CPP
            </span>
            <span class="md-header-nav__topic">
              
                Configuration
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="SSP21-CPP" class="md-nav__button md-logo">
      
        <img src="../../img/ssp21.png" width="48" height="48">
      
    </a>
    SSP21-CPP
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../build/" title="Building" class="md-nav__link">
      Building
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/executor/" title="IExecutor" class="md-nav__link">
      IExecutor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/crypto/" title="ICryptoBackend" class="md-nav__link">
      ICryptoBackend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/error_handling/" title="Error Handling" class="md-nav__link">
      Error Handling
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      ICFTool
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        ICFTool
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../icftool/intro/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Proxy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Proxy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Configuration
      </label>
    
    <a href="./" title="Configuration" class="md-nav__link md-nav__link--active">
      Configuration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#log-levels" class="md-nav__link">
    Log levels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#link-layer" class="md-nav__link">
    Link-layer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-parameters" class="md-nav__link">
    Session parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transport-modes" class="md-nav__link">
    Transport modes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tcp" class="md-nav__link">
    TCP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp" class="md-nav__link">
    UDP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handshake-configuration" class="md-nav__link">
    Handshake configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shared-secret" class="md-nav__link">
    Shared-secret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qkd" class="md-nav__link">
    QKD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-shared-public-key" class="md-nav__link">
    Pre-shared public key
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../qix/" title="QIX" class="md-nav__link">
      QIX
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#log-levels" class="md-nav__link">
    Log levels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#link-layer" class="md-nav__link">
    Link-layer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-parameters" class="md-nav__link">
    Session parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transport-modes" class="md-nav__link">
    Transport modes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tcp" class="md-nav__link">
    TCP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp" class="md-nav__link">
    UDP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handshake-configuration" class="md-nav__link">
    Handshake configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shared-secret" class="md-nav__link">
    Shared-secret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qkd" class="md-nav__link">
    QKD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-shared-public-key" class="md-nav__link">
    Pre-shared public key
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="configuration">Configuration</h1>
<p>The proxy accepts a single argument: the path to a <a href="https://yaml.org/">YAML</a> configuration file. This file contains a hierarchical
configuration model that specifies the configuration for an arbitrary number of SSP21 <code>initiator</code> or <code>responder</code> sessions.</p>
<div class="codehilite"><pre><span></span><span class="nt">qkd_sources</span><span class="p">:</span> <span class="p p-Indicator">[]</span>                  <span class="c1"># sequence of QKD sources (e.g. QIX)</span>
<span class="nt">sessions</span><span class="p">:</span>                        <span class="c1"># sequence of SSP21 proxy sessions</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="s">&quot;session1&quot;</span>               <span class="c1"># an identifer for the session for logging purposes</span>
    <span class="nt">levels</span><span class="p">:</span> <span class="s">&quot;iwemf&quot;</span>              <span class="c1"># enabled log levels for this session</span>
    <span class="nt">transport</span><span class="p">:</span>                   <span class="c1"># configuration of the transport</span>
      <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;tcp&quot;</span>                <span class="c1"># type of transport { tcp, udp }</span>
<span class="c1">#     ...                          OMITTED: transport type specific parameters omitted</span>
    <span class="nt">link_layer</span><span class="p">:</span>                  <span class="c1"># configuration of the link layer</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>              <span class="c1"># if enabled, wrap SSP21 with the link-layer</span>
      <span class="nt">address</span><span class="p">:</span>                   <span class="c1"># addressing configuration required if &#39;enabled&#39; == true</span>
        <span class="nt">local</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>                <span class="c1"># the address of the local node</span>
        <span class="nt">remote</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>                <span class="c1"># the address of the local node</span>
    <span class="nt">security</span><span class="p">:</span>                    <span class="c1"># configuration of the SSP21 crypto layer</span>
      <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;initiator&quot;</span>          <span class="c1"># SSP21 mode: { initiator, responder }</span>
      <span class="nt">session</span><span class="p">:</span>                   <span class="c1"># configuration of the cryptographic session</span>
        <span class="nt">max_payload_size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4096</span>   <span class="c1"># maximum number of payload bytes that can be sent or received</span>
        <span class="nt">ttl_pad</span><span class="p">:</span>                 <span class="c1"># how much of a time pad to apply to session messages</span>
          <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>              <span class="c1"># the value associated with the &#39;unit&#39;</span>
          <span class="nt">unit</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">seconds</span>          <span class="c1"># unit of the time {milliseconds, seconds, minutes, hours}</span>
<span class="c1">#       ...                        OMITTED: initiator or responder specific session parameters</span>
      <span class="nt">handshake</span><span class="p">:</span>                 <span class="c1"># configuration of the handshake</span>
<span class="c1">#       ...                        OMITTED: initiator or responder specific handshake parameters</span>
        <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;shared_secret&quot;</span>    <span class="c1"># type of handshake { shared_secret, preshared_public_key, qkd }</span>
<span class="c1">#       ...                        OMITTED: handshake type specific parameters</span>
</pre></div>


<p>The YAML skeleton above describes all of the configuration values that must be present irrespective of the various modes that can be configured.
The sections where configuration information have been omitted are dependent on the values of other parameters.</p>
<h2 id="log-levels">Log levels</h2>
<p>The <code>levels</code> parameter in a session configuration contains a string of characters that specify which logs messages to enable.</p>
<table>
<thead>
<tr>
<th>level</th>
<th>character</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>event</td>
<td>v</td>
<td>High priority messages such as startup and shutdown</td>
</tr>
<tr>
<td>error</td>
<td>e</td>
<td>Errors that don't occur during normal operation</td>
</tr>
<tr>
<td>warning</td>
<td>w</td>
<td>Less severe than error, events like discconects</td>
</tr>
<tr>
<td>info</td>
<td>i</td>
<td>Informational (non-error or warning) messages</td>
</tr>
<tr>
<td>debug</td>
<td>d</td>
<td>Detailed, but normally overhelming messages</td>
</tr>
<tr>
<td>crypto message</td>
<td>m</td>
<td>High level decoding of SSP21 messages (type) and length</td>
</tr>
<tr>
<td>crypto fields</td>
<td>f</td>
<td>Detailed decoding of the individual fields in SSP21 messages</td>
</tr>
</tbody>
</table>
<h2 id="link-layer">Link-layer</h2>
<p>The SSP21 link-layer provides framing for stream oriented transports like TCP. Additionally, it provides 16-bit source and destination
addresses which can be used for multiplexing multiple sessions on a single transport.</p>
<p>TCP must always enable the link-layer, or an exception is thrown during startup.</p>
<div class="codehilite"><pre><span></span><span class="n">link_layer</span><span class="o">:</span>
  <span class="n">enabled</span><span class="o">:</span> <span class="kc">true</span>
  <span class="n">address</span><span class="o">:</span>
    <span class="n">local</span><span class="o">:</span> <span class="mi">10</span>
    <span class="n">remote</span><span class="o">:</span> <span class="mi">1</span>
</pre></div>


<p>UDP may be used with or without the link-layer. If the link-layer is not used, the address information may be omitted:</p>
<div class="codehilite"><pre><span></span><span class="n">link_layer</span><span class="o">:</span>
    <span class="n">enabled</span><span class="o">:</span> <span class="kc">false</span>
</pre></div>


<h2 id="session-parameters">Session parameters</h2>
<p>The initiator requires a handful of additional parameters not required when configuring a responder.</p>
<div class="codehilite"><pre><span></span><span class="nv">security</span>:
  <span class="nv">mode</span>: <span class="s2">&quot;</span><span class="s">initiator</span><span class="s2">&quot;</span>   
  <span class="nv">session</span>:
    <span class="nv">max_payload_size</span>: <span class="mi">4096</span>
    <span class="nv">ttl_pad</span>:
      <span class="nv">value</span>: <span class="mi">10</span>
      <span class="nv">unit</span>: <span class="nv">seconds</span>
# <span class="o">-----</span> <span class="nv">parameters</span> <span class="nv">below</span> <span class="nv">here</span> <span class="nv">are</span> <span class="nv">only</span> <span class="nv">required</span> <span class="k">for</span> <span class="nv">an</span> <span class="nv">initiator</span> <span class="o">-----</span>
    <span class="nv">max_nonce_value</span>: <span class="mi">32768</span>                      # <span class="nv">maximum</span> <span class="nv">value</span> <span class="k">for</span> <span class="nv">a</span> <span class="nv">session</span> <span class="nv">nonce</span> <span class="ss">(</span><span class="nv">maximum</span> <span class="mi">65535</span><span class="ss">)</span>
    <span class="nv">nonce_renegotiation_trigger_value</span>: <span class="mi">32700</span>    # <span class="nv">nonce</span> <span class="nv">value</span> <span class="nv">that</span> <span class="nv">triggers</span> <span class="nv">renegotiation</span>
    <span class="nv">max_session_duration</span>:                       # <span class="nv">maximum</span> <span class="nv">validity</span> <span class="nv">time</span> <span class="k">for</span> <span class="nv">an</span> <span class="nv">established</span> <span class="nv">session</span>
      <span class="nv">value</span>: <span class="mi">1</span>
      <span class="nv">unit</span>: <span class="nv">hours</span>
    <span class="nv">session_time_renegotiation_trigger</span>:         # <span class="nv">session</span> <span class="nv">time</span> <span class="nv">that</span> <span class="nv">triggers</span> <span class="nv">renegotiation</span>
      <span class="nv">value</span>: <span class="mi">59</span>
      <span class="nv">unit</span>: <span class="nv">minutes</span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the future, the initiator will also allow you to specify which cryptographic primitives (suite) to use
when SSP21 formally specifies more than one primitive per function.</p>
</div>
<h2 id="transport-modes">Transport modes</h2>
<p>The proxy supports TCP and UDP transport. Both modes take specific parameters. The following subsections provide configuration
snippets for each mode.</p>
<h3 id="tcp">TCP</h3>
<p>TCP transport requires the following parameters.</p>
<div class="codehilite"><pre><span></span><span class="nv">transport</span>:
  <span class="nv">type</span>: <span class="s2">&quot;</span><span class="s">tcp</span><span class="s2">&quot;</span>
  <span class="nv">max_sessions</span>: <span class="mi">1</span>                # <span class="nv">The</span> <span class="nv">maximum</span> <span class="nv">number</span> <span class="nv">of</span> <span class="nv">concurrent</span> <span class="nv">sessions</span> <span class="nv">on</span> <span class="nv">the</span> <span class="nv">listening</span> <span class="nv">side</span>
    <span class="nv">listen</span>:           
      <span class="nv">address</span>: <span class="s2">&quot;</span><span class="s">127.0.0.1</span><span class="s2">&quot;</span>       # <span class="nv">IP</span> <span class="nv">address</span> <span class="nv">of</span> <span class="nv">adapter</span> <span class="nv">on</span> <span class="nv">which</span> <span class="nv">to</span> <span class="nv">listen</span>
      <span class="nv">port</span>: <span class="mi">20000</span>                # <span class="nv">Port</span> <span class="nv">on</span> <span class="nv">which</span> <span class="nv">to</span> <span class="nv">listen</span>
    <span class="k">connect</span>:
      <span class="nv">address</span>: <span class="s2">&quot;</span><span class="s">127.0.0.1</span><span class="s2">&quot;</span>       # <span class="nv">IP</span> <span class="nv">to</span> <span class="k">connect</span>
      <span class="nv">port</span>: <span class="mi">20001</span>                # <span class="nv">Port</span> <span class="nv">to</span> <span class="k">connect</span>
</pre></div>


<p>When using TCP as an initiator, the proxy will not attempt a SSP21/TCP connection until the application (raw) side
of the connection occurs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With regard to listening, certain special addresses have the typical meanings:</p>
<ul>
<li>
<p><em>"0.0.0.0"</em> - listen on all adapters</p>
</li>
<li>
<p><em>"127.0.0.1"</em> - only accept connections from the loopback adapter</p>
</li>
</ul>
</div>
<h3 id="udp">UDP</h3>
<p>UDP is a connectionless transport protocol, so you must specify addresses and ports
for both receiving and transmitting separately.</p>
<div class="codehilite"><pre><span></span><span class="n">transport</span><span class="o">:</span>
  <span class="n">type</span><span class="o">:</span> <span class="s2">&quot;udp&quot;</span>      
  <span class="n">raw_rx</span><span class="o">:</span>
    <span class="n">address</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
    <span class="n">port</span><span class="o">:</span> <span class="mi">20000</span>
  <span class="n">raw_tx</span><span class="o">:</span>
    <span class="n">address</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
    <span class="n">port</span><span class="o">:</span> <span class="mi">20001</span>
  <span class="n">secure_rx</span><span class="o">:</span>
    <span class="n">address</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
    <span class="n">port</span><span class="o">:</span> <span class="mi">20002</span>
  <span class="n">secure_tx</span><span class="o">:</span>
    <span class="n">address</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
    <span class="n">port</span><span class="o">:</span> <span class="mi">20003</span>
</pre></div>


<p>The following diagram illustrates how the parameters above are applied:</p>
<p><img alt="UDP proxy" src="../../img/udp.svg" /></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be careful when setting the ports so that no communication loops back creating a cycle.</p>
</div>
<h2 id="handshake-configuration">Handshake configuration</h2>
<p>Different handshake modes require different paramters described in the following sub-sections.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Initiator's require some additional configuration in the handshake section to specify some timeouts:</p>
</div>
<div class="codehilite"><pre><span></span><span class="nt">handshake</span><span class="p">:</span>
  <span class="nt">response_timeout</span><span class="p">:</span>
    <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">unit</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">seconds</span>
  <span class="nt">retry_timeout</span><span class="p">:</span>
    <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
    <span class="nt">unit</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">seconds</span>
  <span class="nt">type</span><span class="p">:</span> <span class="c1"># ....</span>
</pre></div>


<p>These timeout parameters are not required when configuring a responder.</p>
<h3 id="shared-secret">Shared-secret</h3>
<p>A shared secret handshake only requires a single parameter specifiying where the shared key resides.</p>
<div class="codehilite"><pre><span></span><span class="nt">handshake</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;shared_secret&quot;</span>
  <span class="nt">shared_secret_key_path</span><span class="p">:</span> <span class="s">&quot;./shared_secret.icf&quot;</span>  <span class="c1"># path to the file containing the shared secret</span>
</pre></div>


<h3 id="qkd">QKD</h3>
<p>QKD mode allows for a source of keys to be shared across multiple proxy sessions. The first item
in a configuration file is a list of these sources</p>
<div class="codehilite"><pre><span></span><span class="c1"># a sequence of QKD sources</span>
<span class="nt">qkd_sources</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">qkd_source_id</span><span class="p">:</span> <span class="s">&quot;source1&quot;</span>        <span class="c1"># a unique identifier for the source</span>
    <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;qix&quot;</span>                     <span class="c1"># the only supported type ATM is qix</span>
    <span class="nt">num_subscribers</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>              <span class="c1"># the number of subscribers</span>
    <span class="nt">serial</span><span class="p">:</span>                  
      <span class="nt">device</span><span class="p">:</span> <span class="s">&quot;/dev/pts/3&quot;</span>          <span class="c1"># the serial device, e.g. /dev/ttyS0 or COM1</span>
      <span class="nt">baud</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9600</span>                    <span class="c1"># baud rate, defaults to 9600 if not specified</span>
      <span class="nt">data_bits</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>                  <span class="c1"># data bits, defaults to 8 if not specified</span>
      <span class="nt">flow_control</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">none</span>            <span class="c1"># flow control, defaults to &#39;none&#39; if not specified</span>
      <span class="nt">stop_bits</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">one</span>                <span class="c1"># stop bits, defaults to &#39;one&#39; if not specified</span>
</pre></div>


<p>Down within a session's handshake section, the following parameters are required:</p>
<div class="codehilite"><pre><span></span>  <span class="nv">handshake</span>:
    <span class="nv">type</span>: <span class="s2">&quot;</span><span class="s">qkd</span><span class="s2">&quot;</span>               
    <span class="nv">key_source_id</span>: <span class="s2">&quot;</span><span class="s">source1</span><span class="s2">&quot;</span>        # <span class="nv">source</span> <span class="nv">id</span> <span class="nv">matching</span> <span class="nv">the</span> <span class="nv">id</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">list</span> <span class="nv">above</span>
    <span class="nv">subscriber_id</span>: <span class="mi">0</span>                # <span class="nv">unique</span> <span class="nv">subscriber</span> <span class="nv">id</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">range</span> [<span class="mi">0</span> .. <span class="ss">(</span><span class="nv">num_subscribers</span> <span class="o">-</span> <span class="mi">1</span><span class="ss">)</span>]
    <span class="nv">max_key_cache_size</span>: <span class="mi">100</span>         # <span class="nv">maximum</span> <span class="nv">number</span> <span class="nv">of</span> <span class="nv">cached</span> <span class="nv">keys</span> <span class="k">for</span> <span class="nv">this</span> <span class="nv">particular</span> <span class="nv">session</span>.
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The format of the key data transmitted over the serial port is not standarized yet and is only interoperable at the moment with QKD transceivers from 
<a href="http://qubitekk.com/">Qubitekk</a>.</p>
</div>
<p>The source expects the key identifier to increment so that it can send the keys to each subscriber in a predictable fashion. The correct subscriber
for any keys is calculated as:</p>
<div class="codehilite"><pre><span></span><span class="n">subscriber_id</span> <span class="o">=</span> <span class="n">key_identifier</span> <span class="o">%</span> <span class="n">num_subscribers</span>
</pre></div>


<h3 id="pre-shared-public-key">Pre-shared public key</h3>
<p>Pre-shared key modes requires the paths to 3 keys be provideded:</p>
<div class="codehilite"><pre><span></span> <span class="n">handshake</span><span class="p">:</span>  
  <span class="k">type</span><span class="p">:</span> <span class="ss">&quot;preshared_public_key&quot;</span>
  <span class="n">local_private_key_path</span><span class="p">:</span> <span class="ss">&quot;./local_private_key.icf&quot;</span>     <span class="o">#</span> <span class="n">private</span> <span class="n">part</span> <span class="k">of</span> <span class="n">the</span> <span class="k">local</span> <span class="k">static</span> <span class="n">DH</span> <span class="k">key</span>
  <span class="n">local_public_key_path</span><span class="p">:</span> <span class="ss">&quot;./local_public_key.icf&quot;</span>       <span class="o">#</span> <span class="k">public</span> <span class="n">part</span> <span class="k">of</span> <span class="n">the</span> <span class="k">local</span> <span class="k">static</span> <span class="n">DH</span> <span class="k">key</span>
  <span class="n">remote_public_key_path</span><span class="p">:</span> <span class="err">&quot;</span><span class="p">.</span><span class="o">/</span><span class="n">remote_public_key</span><span class="p">.</span><span class="n">icf</span>      <span class="o">#</span> <span class="k">public</span> <span class="k">key</span> <span class="k">of</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">party</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../intro/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../qix/" title="QIX" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                QIX
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>